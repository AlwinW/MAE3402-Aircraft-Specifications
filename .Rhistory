Desc <- Desc %>%
rowwise() %>%
do(data.frame(
.,
theta = ModifiedSecant(function(theta)
DescentRatesFunction(.$Cd0, .$K, .$W, .$m, .$S, .$h, .$V, theta, accelonly = TRUE),
xr = 0.063, del = 0.001, toler = 0.01, positive = TRUE)
))
DescentZeroAccel(Desc, 1000, 82)
DescentRatesFunction <- function(Cd0, K, W, m, S, h, V, theta, accelonly = FALSE, all = FALSE) {
rho = StandardAtomsphere(data.frame(h=h))$rho
qinf = 1/2 * rho * V^2
Cl = W*cos(theta)/(qinf*S)
Cd = Cd0 + K * Cl^2
D = qinf*Cd*S
accel = (W*sin(theta) - D)/m
if (accelonly == TRUE)
return(accel)
if (all == TRUE)
return(data.frame(
rho = rho,
Cl = Cl,
Cd = Cd,
D = D,
accel = accel
))
}
DescentZeroAccel <- function(inp, h, V, timecalc = FALSE) {
Desc <- RepeatRows(inp, length(h))
Desc$h<- h
# Find theta for zero accel
Desc <- Desc %>%
rowwise() %>%
do(data.frame(
.,
theta = ModifiedSecant(function(theta)
DescentRatesFunction(.$Cd0, .$K, .$W, .$m, .$S, .$h, .$V, theta, accelonly = TRUE),
xr = 0.063, del = 0.001, toler = 0.01, positive = TRUE)
))
Desc = DescentRatesFunction(inp, h, V, theta, all = TRUE)
}
debug(DescentRatesFunction)
DescentZeroAccel(Desc, 1000, 82)
DescentZeroAccel(Desc, 1000, 82)
Cd0
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, 1000, 82)
DescentZeroAccel(Desc, 1000, 82)
DescentZeroAccel <- function(inp, h, V, timecalc = FALSE) {
Desc <- RepeatRows(inp, length(h))
Desc$h <- h
Desc$V <- V
# Find theta for zero accel
Desc <- Desc %>%
rowwise() %>%
do(data.frame(
.,
theta = ModifiedSecant(function(theta)
DescentRatesFunction(.$Cd0, .$K, .$W, .$m, .$S, .$h, .$V, theta, accelonly = TRUE),
xr = 0.063, del = 0.001, toler = 0.01, positive = TRUE)
))
Desc = DescentRatesFunction(inp, h, V, theta, all = TRUE)
}
DescentZeroAccel(Desc, 1000, 82)
DescentZeroAccel <- function(inp, h, V, timecalc = FALSE) {
Desc <- RepeatRows(inp, length(h))
Desc$h <- h
Desc$V <- V
# Find theta for zero accel
Desc <- Desc %>%
rowwise() %>%
do(data.frame(
.,
theta = ModifiedSecant(function(theta)
DescentRatesFunction(.$Cd0, .$K, .$W, .$m, .$S, .$h, .$V, theta, accelonly = TRUE),
xr = 0.063, del = 0.001, toler = 0.01, positive = TRUE)
))
Desc = DescentRatesFunction(inp, h, V, theta, all = TRUE)
}
debug(DescentRatesFunction)
DescentZeroAccel(Desc, 1000, 82)
Cd0
h
K
m
S
DescentZeroAccel <- function(inp, h, V, timecalc = FALSE) {
Desc <- RepeatRows(inp, length(h))
Desc$h <- h
Desc$V <- V
# Find theta for zero accel
Desc <- Desc %>%
rowwise() %>%
do(data.frame(
.,
theta = ModifiedSecant(function(theta)
DescentRatesFunction(.$Cd0, .$K, .$W, .$m, .$S, .$h, .$V, theta, accelonly = TRUE),
xr = 0.063, del = 0.00001, toler = 0.0001, positive = TRUE)
))
Desc = DescentRatesFunction(inp, h, V, theta, all = TRUE)
}
DescentZeroAccel(Desc, 1000, 82)
undebug(DescentRatesFunction)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, 1000, 82)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, 1000, 82)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, 1000, 82)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, 1000, 82)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, 1000, 82)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, 1000, 82)
DescentZeroAccel <- function(inp, h, V, timecalc = FALSE) {
Desc <- RepeatRows(inp, length(h))
Desc$h <- h
Desc$V <- V
# Find theta for zero accel
Desc <- Desc %>%
rowwise() %>%
do(data.frame(
.,
theta = ModifiedSecant(function(theta)
DescentRatesFunction(.$Cd0, .$K, .$W, .$m, .$S, .$h, .$V, theta, accelonly = TRUE),
xr = 0.063, del = 1e-10, toler = 1e-8, positive = TRUE)
)) %>%
do(data.frame(
.,
DescentRatesFunction(.$Cd0, .$K, .$W, .$m, .$S, .$h, .$V, .$theta, all = TRUE)
)) %>%
mutate(accel = 0)
Desc <- data.frame(Desc)
return(Desc)
}
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, 1000, 82)
Desc <- mutate(inp, Cd0 = Cd0clean + 2*Cd0propfea)
DescentZeroAccel(Desc, 1000, 82)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, 1000, 82)
DescentZeroAccel(Desc, c(1000, 1500), 82)
?round
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, c(1000, 1500), 82)
round(1e-11, 10)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, c(1000, 1500), 82)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, c(1000, 1500), 82)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, c(1000, 1500), 82)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, c(1000, 1500), 82)
DescentZeroAccel(Desc, c(1000, 1500), 82)
DescentZeroAccel(Desc, c(1000, 1500), 82)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
DescentZeroAccel(Desc, c(1000, 1500), 82)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
integrate(function(h)
DescentZeroAccel(Desc, h, inp$Vcruise, timecalc = TRUE),
lower = hcrit, upper = inp$AltCruise
)
integrate(function(h)
DescentZeroAccel(Desc, h, inp$Vcruise, timecalc = TRUE),
lower = inp$AltCruise, upper = hcrit
)[[1]]
12295.4/60
12295.4/60/60
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
integrate(function(h)
DescentZeroAccel(Desc, h, inp$Vcruise, timecalc = TRUE),
lower = inp$AltCruise, upper = hcrit
)[[1]]
520.0676/60
source('~/Git/MAE3402 Aircraft Specifications/Helper Initial Values.R', echo=TRUE)
source('~/Git/MAE3402 Aircraft Specifications/Helper Initial Values.R', echo=TRUE)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
Desc <- mutate(inp, Cd0 = Cd0clean + 2*Cd0propfea)
hcrit = ModifiedSecant(function(h)
DescentRatesFunction(Desc$Cd0, Desc$K, Desc$W, Desc$m, Desc$S, h, Desc$Vcruise, Desc$DescAngle, accelonly = TRUE),
xr = 1000, del = 0.001, toler = 0.01, positive = TRUE)
hcrit = max(hcrit, inp$AltFlaps)
hcrit
## Take Off ======================================================================
#--- Clean up input
TOall <- filter(TO, type == "All Engines")
AirDistanceall <- filter(AirDistance, type == "All Engines")
#--- Take-off Ground Roll
TOgr <- integrate(function(V)
GroundAcceleration(TOall, V, energycalc = TRUE),
lower = 0, upper = 1.1*inp$VsTO
)[[1]] +
PA(inp$Pshafteng, 2, 1.1 * inp$VsTO) * 3
#--- Take-off Transition
TOtr <- integrate(Vectorize(function(h)
PA(inp$Pshafteng, 2, 1.15*inp$VsTO) /
(sin(AirDistanceall$gamma) * 1.15*inp$VsTO)),
lower = 0, upper = AirDistance$hTR
)[[1]]
#--- 1st Semgnet Climb
if (AirDistanceall$SC > 0) {
Seg1 <- integrate(Vectorize(function(h)
PA(inp$Pshafteng, 2, 1.15*inp$VsTO) /
(sin(atan(AirDistanceall$hTR/(AirDistanceall$Sair - AirDistanceall$ST))) * 1.15*inp$VsTO)),
lower = AirDistance$hTR, upper = inp$Hobs
)[[1]]
} else {
Seg1 = 0
}
#--- 2nd Segment Climb
Seg2inp <- inp %>%
mutate(
Cd0 = Cd0clean + Cd0flaps + Cdiflaps,
Ne = 2,
Vconst = 1.2*VsTO
)
Seg2 <- integrate(function(h)
ClimbEnergy(Seg2inp, h, energycalc = TRUE),
lower =  max(AirDistance$hTR, inp$Hobs), upper = inp$AltFlaps
)[[1]]
#--- 3rd Segment Acceleration
Seg3inp <- inp %>%
mutate(
h = inp$AltFlaps,
Cd0 = Cd0clean + Cd0flaps + Cdiflaps,
Ne = 2
)  %>%
StandardAtomsphere(.)
Seg3 <- integrate(function(V)
AccelerateEnergy(Seg3inp, V, energycalc = TRUE),
lower = 1.2*inp$VsTO, upper = inp$Mach*Seg3inp$a
)[[1]]
# 4th Segment Climb
Seg4inp <- inp %>%
mutate(
Cd0 = Cd0clean,
Ne = 2,
Vconst = 0
)
Seg4 <- integrate(function(h)
ClimbEnergy(Seg4inp, h, energycalc = TRUE),
lower =  inp$AltFlaps, upper = inp$AltCruise
)[[1]]
#--- 3rd Segment Acceleration
Seg3inp <- inp %>%
mutate(
h = inp$AltFlaps,
Cd0 = Cd0clean + Cd0flaps + Cdiflaps,
Ne = 2
)  %>%
StandardAtomsphere(.)
Seg3 <- integrate(function(V)
AccelerateEnergy(Seg3inp, V, energycalc = TRUE),
lower = 1.2*inp$VsTO, upper = inp$Mach*Seg3inp$a
)[[1]]
#--- 3rd Segment Acceleration
Seg3inp <- inp %>%
mutate(
h = inp$AltFlaps,
Cd0 = Cd0clean + Cd0flaps + Cdiflaps,
Ne = 2
)  %>%
StandardAtomsphere(.)
Seg3inp <- inp %>%
mutate(
h = AltFlaps,
Cd0 = Cd0clean + Cd0flaps + Cdiflaps,
Ne = 2
)  %>%
StandardAtomsphere(.)
Seg3inp <- inp %>%
mutate(
h = AltFlaps,
Cd0 = Cd0clean + Cd0flaps + Cdiflaps,
Ne = 2
)  %>%
StandardAtomsphere(.)
Seg3 <- integrate(function(V)
AccelerateEnergy(Seg3inp, V, energycalc = TRUE),
lower = 1.2*inp$VsTO, upper = inp$Mach*Seg3inp$a
)[[1]]
Seg4inp <- inp %>%
mutate(
Cd0 = Cd0clean,
Ne = 2,
Vconst = 0
)
Seg4 <- integrate(function(h)
ClimbEnergy(Seg4inp, h, energycalc = TRUE),
lower =  inp$AltFlaps, upper = inp$AltCruise
)[[1]]
--- Critical h Value
Desc <- mutate(inp, Cd0 = Cd0clean + 2*Cd0propfea)
hcrit = ModifiedSecant(function(h)
DescentRatesFunction(Desc$Cd0, Desc$K, Desc$W, Desc$m, Desc$S, h, Desc$Vcruise, Desc$DescAngle, accelonly = TRUE),
xr = 1000, del = 0.001, toler = 0.01, positive = TRUE)
hcrit = max(hcrit, inp$AltFlaps)
#--- Zero Acceleration
timecrit = integrate(function(h)
DescentZeroAccel(Desc, h, inp$Vcruise, timecalc = TRUE),
lower = inp$AltCruise, upper = hcrit
)[[1]]
#--- Critical h Value
Desc <- mutate(inp, Cd0 = Cd0clean + 2*Cd0propfea)
hcrit = ModifiedSecant(function(h)
DescentRatesFunction(Desc$Cd0, Desc$K, Desc$W, Desc$m, Desc$S, h, Desc$Vcruise, Desc$DescAngle, accelonly = TRUE),
xr = 1000, del = 0.001, toler = 0.01, positive = TRUE)
hcrit = max(hcrit, inp$AltFlaps)
#--- Zero Acceleration
timecrit = integrate(function(h)
DescentZeroAccel(Desc, h, inp$Vcruise, timecalc = TRUE),
lower = inp$AltCruise, upper = hcrit
)[[1]]
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
integrate(function(h)
DescentRatesFunction(Desc$Cd0, Desc$K, Desc$W, Desc$m, Desc$S, h, Desc$Vcruise, Desc$DescAngle, Vvonly = TRUE),
lower = hcrit, upper = inp$AltFlaps
)[[1]]
integrate(function(h)
1/DescentRatesFunction(Desc$Cd0, Desc$K, Desc$W, Desc$m, Desc$S, h, Desc$Vcruise, Desc$DescAngle, Vvonly = TRUE),
lower = hcrit, upper = inp$AltFlaps
)
debug(DescentRatesFunction)
Desc <- mutate(inp, Cd0 = Cd0clean + 2*Cd0propfea)
integrate(function(h)
1/DescentRatesFunction(Desc$Cd0, Desc$K, Desc$W, Desc$m, Desc$S, h, Desc$Vcruise, Desc$DescAngle, Vvonly = TRUE),
lower = hcrit, upper = inp$AltFlaps
)
Vv
accel
integrate(function(h)
DescentRatesFunction(Desc$Cd0, Desc$K, Desc$W, Desc$m, Desc$S, h, Desc$Vcruise, Desc$DescAngle, accelonly = TRUE),
lower = hcrit, upper = inp$AltFlaps
)[[1]]
DescentRatesFunction(Desc$Cd0, Desc$K, Desc$W, Desc$m, Desc$S, h, Desc$Vcruise, Desc$DescAngle, accelonly = TRUE)
undebug(DescentRatesFunction)
Desc <- mutate(inp, Cd0 = Cd0clean + 2*Cd0propfea)
DescentRatesFunction(Desc$Cd0, Desc$K, Desc$W, Desc$m, Desc$S, h, Desc$Vcruise, Desc$DescAngle, accelonly = TRUE)
DescentRatesFunction(Desc$Cd0, Desc$K, Desc$W, Desc$m, Desc$S, 300, Desc$Vcruise, Desc$DescAngle, accelonly = TRUE)
integrate
time = integrate(function(h)
DescentZeroAccel(Desc, h, inp$Vcruise, timecalc = TRUE),
lower = inp$AltCruise, upper = inp$AltFlaps
)[[1]]
timecrit = integrate(function(h)
DescentZeroAccel(Desc, h, inp$Vcruise, timecalc = TRUE),
lower = inp$AltCruise, upper = hcrit
)[[1]]
Desc <- mutate(inp, Cd0 = Cd0clean + 2*Cd0propfea)
timecrit = integrate(function(h)
DescentZeroAccel(Desc, h, inp$Vcruise, timecalc = TRUE),
lower = inp$AltCruise, upper = hcrit
)[[1]]
timecrit = integrate(function(h)
DescentZeroAccel(Desc, h, inp$Vcruise, timecalc = TRUE),
lower = inp$AltCruise, upper = hcrit
)[[1]]
Desc
View(Desc)
debugSource('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
debugSource('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
undebug(DescentZeroAccel)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
timecrit = integrate(function(h)
DescentZeroAccel(Desc, h, inp$Vcruise, timecalc = TRUE),
lower = inp$AltCruise, upper = hcrit
)[[1]]
timecrit
time = integrate(function(h)
DescentZeroAccel(Desc, h, inp$Vcruise, timecalc = TRUE),
lower = inp$AltCruise, upper = inp$AltFlaps
)[[1]]
time
Desc = time * PA(inp$Pshafteng, 2, inp$Vcruise)
Desc
Desc = time * PA(inp$Pshafteng, 2, inp$Vcruise) * 0.05
energysummary <- data.frame(
TOgr = TOgr,
TOtr = TOtr,
Seg1 = Seg1,
Seg2 = Seg2,
Seg3 = Seg3,
Seg4 = Seg4,
Desc = Desc
)
energysummary
energysummary/1e6
mutate(inp, h = Altcruise)
Cruiseinp <- mutate(inp, h = AltCruise) %>%
StandardAtomsphere(.) %>%
mutate(
Vinf = Vcruise,
qinf = 1/2 * rho * Vinf^2,
Cl = W/(qinf * S),
Cd0 = Cd0clean,
Cd = Cd0 + K * Cl^2,
D = qinf * S * Cd
)
Cruise = Cruiseinp$TR * Cruiseinp$Range
Cruise
Cruiseinp <- mutate(inp, h = AltCruise) %>%
StandardAtomsphere(.) %>%
mutate(
Vinf = Vcruise,
qinf = 1/2 * rho * Vinf^2,
Cl = W/(qinf * S),
Cd0 = Cd0clean,
Cd = Cd0 + K * Cl^2,
D = qinf * S * Cd,
TR = D,
PR = TR * Vinf,
etaprop = etaprop(Vinf)
)
Cruise = Cruiseinp$TR * Cruiseinp$Range
Cruise
Cruise = Cruiseinp$TR / Cruiseinp$etaprop * Cruiseinp$Range
energysummary <- data.frame(
TOgr = TOgr,
TOtr = TOtr,
Seg1 = Seg1,
Seg2 = Seg2,
Seg3 = Seg3,
Seg4 = Seg4,
Cruise = Cruise,
Desc = Desc
)
sum(energysummary/inp$E/inp$etamech)
Cruise = Cruiseinp$TR / Cruiseinp$etaprop * Cruiseinp$Range * 0.9
energysummary <- data.frame(
TOgr = TOgr,
TOtr = TOtr,
Seg1 = Seg1,
Seg2 = Seg2,
Seg3 = Seg3,
Seg4 = Seg4,
Cruise = Cruise,
Desc = Desc
)
sum(energysummary/inp$E/inp$etamech)
TOgr = integrate(function(V) V/GroundAcceleration(filter(TO, type == "All Engines"), V, distancecalc = TRUE),
lower = 0, upper = 1.1*inp$VsTO)[[1]] + 3 * 1.1*inp$VsTO
source('~/Git/MAE3402 Aircraft Specifications/Helper Install Packages.R', echo=TRUE)
TOgr = integrate(function(V) V/GroundAcceleration(filter(TO, type == "All Engines"), V, distancecalc = TRUE),
lower = 0, upper = 1.1*inp$VsTO)[[1]] + 3 * 1.1*inp$VsTO
TOtr = AirDistanceall$Sair
Seg2 = integrate(function(h) 1.2*inp$VsTO/ClimbEnergy(Seg2inp, h, distancecalc = TRUE),
lower =  max(AirDistance$hTR, inp$Hobs), upper = inp$AltFlaps)[[1]]
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
source('~/Git/MAE3402 Aircraft Specifications/Helper Power Usage.R', echo=TRUE)
Seg2 = integrate(function(h) 1.2*inp$VsTO/ClimbEnergy(Seg2inp, h, distancecalc = TRUE),
lower =  max(AirDistance$hTR, inp$Hobs), upper = inp$AltFlaps)[[1]]
Seg3 = integrate(function(V) V/AccelerateEnergy(Seg3inp, V, distancecalc = TRUE),
lower = 1.2*inp$VsTO, upper = inp$Mach*Seg3inp$a)[[1]]
Seg4 = integrate(function(h) inp$Mach*Seg3inp$a/ClimbEnergy(Seg4inp, h, distancecalc = TRUE),
inp$AltFlaps, upper = inp$AltCruise)[[1]]
ggplot(Climboutput, aes(x=Vinf, y=PerGrad, group = type, colour = type)) +
geom_path() +
geom_point(aes(shape = Vname, size = ifelse(Vname == "Vinf", 0, 1))) +
geom_hline(aes(yintercept = 1.5, colour = "2nd Seg OEI")) +
geom_text(aes(x = min(Vinf), y = 1.5, colour = "2nd Seg OEI"),
label = "Minimum 2nd Seg Climb OEI", hjust = 0, vjust = 1.5,
show.legend = FALSE) +
scale_size(range = c(0,3)) +
scale_shape_manual(
breaks = c("Vstall", "Vsafe", "Vcruise"),
values = c("Vstall" = 2, "Vsafe" = 0, "Vcruise" = 1, "Vinf" = 1)) +
guides(size = FALSE) +
labs(list(title = "Percentage Graidents", x = "Vinf (m/s)", y = "Percentage Gradient (%)",
colour = "Mission Segment", shape = "Velocity")) +
ylim(-10, NA)
source('~/Git/MAE3402 Aircraft Specifications/Helper Install Packages.R', echo=TRUE)
ggplot(Climboutput, aes(x=Vinf, y=PerGrad, group = type, colour = type)) +
geom_path() +
geom_point(aes(shape = Vname, size = ifelse(Vname == "Vinf", 0, 1))) +
geom_hline(aes(yintercept = 1.5, colour = "2nd Seg OEI")) +
geom_text(aes(x = min(Vinf), y = 1.5, colour = "2nd Seg OEI"),
label = "Minimum 2nd Seg Climb OEI", hjust = 0, vjust = 1.5,
show.legend = FALSE) +
scale_size(range = c(0,3)) +
scale_shape_manual(
breaks = c("Vstall", "Vsafe", "Vcruise"),
values = c("Vstall" = 2, "Vsafe" = 0, "Vcruise" = 1, "Vinf" = 1)) +
guides(size = FALSE) +
labs(list(title = "Percentage Graidents", x = "Vinf (m/s)", y = "Percentage Gradient (%)",
colour = "Mission Segment", shape = "Velocity")) +
ylim(-10, NA)
ggplot(Climboutput, aes(x=Vinf, y = ClimbRate / 0.3 * 60, group = type, colour = type)) +
geom_path() +
geom_point(aes(shape = Vname, size = ifelse(Vname == "Vinf", 0, 1))) +
geom_hline(aes(yintercept = 100, colour = "Ceiling")) +
geom_text(aes(x = min(Vinf), y = 100, colour = "Ceiling"),
label = "Minimum Ceiling Rate of Climb", hjust = 0, vjust = 1.5,
show.legend = FALSE) +
geom_hline(aes(yintercept = 300, colour = "Cruise")) +
geom_text(aes(x = min(Vinf), y = 300, colour = "Cruise"),
label = "Minimum Cruise Rate of Climb", hjust = 0, vjust = 1.5,
show.legend = FALSE) +
scale_size(range = c(0,3)) +
scale_shape_manual(
breaks = c("Vstall", "Vsafe", "Vcruise"),
values = c("Vstall" = 2, "Vsafe" = 0, "Vcruise" = 1, "Vinf" = 1)) +
guides(size = FALSE) +
labs(list(title = "Climb Rates (Vv)", x = "Vinf (m/s)", y = "Climb Rate (ft/min)",
colour = "Mission Segment", shape = "Velocity")) +
ylim(-10, NA)
